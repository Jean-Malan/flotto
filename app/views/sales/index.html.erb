<% if notice %>
    <p class= 'alert alert-success'><%= notice %></p>
<% end %>
</br>
<%= link_to 'New Invoice', new_sale_path,  class: "btn btn-primary col-md-4" %> <%= link_to 'Drafts', sales_draft_index_path,  class: "btn btn-default pull-right" %><%= link_to 'Outstanding', sales_unpaid_path,  class: "btn btn-danger pull-right" %><%= link_to 'Partially Paid', sales_partially_paid_path,  class: "btn btn-warning pull-right" %><%= link_to 'Paid', sales_paid_path,  class: "btn btn-success pull-right" %><%= link_to 'All', sales_path,  class: "btn btn-info pull-right" %>  


<br><br>
<div class= "card">
<table class="table">
  <thead>
    <tr>
      <th>Date</th>
      <th>Customer</th>
      <th>Description</th>
      <th>Amount</th>
      <th>Type</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @sales.each do |sale| %>
      <tr>
        <td><%= link_to sale.date, sale_path(sale) %></td>
        <td><%= sale.contact_id ? sale.contact.name : 'No customer'  %></td>
        <td><%= "Inv #{sale.invoice_number}" %></td>
      <td><%= sale.amount ? sale.amount.to_f.round(2) : "0"%></td>
      
      
             <td>    <% if sale.sales_type == 'estimate' %>
            <%= link_to "Quote", edit_sale_path(sale), class:"btn btn-warning" %></td>
           
            <% else if sale.sales_type == 'draft' %>
            <%= link_to "Draft", edit_sale_path(sale), class:"btn btn-danger" %>
            
          <% else if sale.sales_type == 'invoice' %>
         <%= link_to "Invoice", edit_sale_path(sale), class:"btn btn-success" %></td>
            <% end %>
             <% end %>
             <% end %>
      </td>   
        <td><%= link_to "Edit", edit_sale_path(sale) %> | <%= link_to 'Delete', sale, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<br>


